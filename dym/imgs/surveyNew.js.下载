(function(c){var a="\\0/";var b="<style type='text/css'>.survey-radio,.survey-radio i,.survey-close,.survey-submit,.survey-tip,#backTop i,#callSurvey i{background:url(//icon.zol-img.com.cn/sj/images/pubFeedBack-bg.png) no-repeat; _background:url(//icon.zol-img.com.cn/sj/images/pubFeedBack_IE6bg.png) no-repeat;}"+".survey-box {opacity:.3; opacity:1 "+a+"; width:318px; height:0; position:fixed; _position:absolute; right:0; bottom:-244px; overflow:hidden; border:1px solid #e6e6e6; background-color:#fff; box-shadow:-2px -2px 15px #ccc; -webkit-box-shadow:-2px -2px 15px #ccc; -moz-box-shadow:-2px -2px 15px #ccc; font-family:arial,'\5b8b\4f53'; font-size:12px; z-index:10000000}"+".survey-ie {visibility:hidden; height:205px; right:0; bottom:0}"+".survey-show-w3c {height:205px; opacity:1; right:0; bottom:0; -webkit-transition-timing-function:ease-out; -moz-transition-timing-function:ease-out; -o-transition-timing-function:ease-out; -webkit-transition-duration:.8s; -moz-transition-duration:.8s; -o-transition-duration:.8s}"+".survey-hide-w3c {-webkit-transition-timing-function:ease-out; -moz-transition-timing-function:ease-out; -o-transition-timing-function:ease-out; -webkit-transition-duration:.8s; -moz-transition-duration:.8s; -o-transition-duration:.8s}"+".survey-header {width:318px; height:32px; border-bottom:1px solid #f0f0f0; line-height:32px; color:#333}"+".survey-title {float:left; font:bold 12px/32px '\5b8b\4f53'; text-indent:15px}"+".survey-title em{color:#F60}"+".survey-close {float:right; height:32px; width:32px; background-position: 0 -53px; outline:0 none}"+".survey-close:hover {background-position:-25px -53px}"+".survey-main {padding:10px 15px 15px; width:290px}"+".survey-radio {float:left; position:relative; zoom:1; width:50px; padding-left:50px; height:25px; line-height:25px; background-position:-87px -56px; cursor:pointer}"+".survey-radio-good-sel,.survey-radio-bad-sel {background-position:-87px -81px}"+".survey-radio i {position:absolute; left:23px; top:4px; width:21px; height:18px}"+".survey-radio-good i {background-position:0 -115px}"+".survey-radio-good-sel i{background-position:0 -89px}"+".survey-radio-bad i{background-position:-26px -115px}"+".survey-radio-bad-sel i{background-position:-26px -89px}"+".survey-text {clear:both; width:283px; height:74px; border:1px solid #d8d7d7; margin:12px 0 0; padding:2px 0 2px 5px; resize:none; _display:inline; font-size:12px; overflow-y:auto; line-height:18px; vertical-align:top}"+".survey-text.default {color:#999}"+".survey-count {margin-top:10px; float:left; height:24px; line-height:24px; color:#999}"+".survey-count-cur {color:#666}"+".survey-count-over {color:#f60}"+".survey-submit {float:right; border:0 none; width:49px; height:24px; margin-top:10px; text-indent:-999em; overflow:hidden; background-position:-51px -28px; cursor:pointer}"+".survey-submit:hover {background-position:0 -28px}"+".survey-submit-disabled,.survey-submit-disabled:hover {cursor:default; background-position:0 -145px}"+".survey-mask {background:#eee; width:100%; height:100%;_height:205px; position:absolute; left:0; top:0; z-index:10; opacity:.5; filter:alpha(opacity=50);display:none}"+".survey-tip { position:absolute; left:50%; top:50%; display:none; margin:-20px 0 0 -100px; padding:9px; width:185px; height:20px; line-height:20px; border:1px solid #ffc34c; background-color:#fffad6;  z-index:11; text-indent:20px; opacity:.7; filter:alpha(opacity=70)}"+".survey-tip.warning {background-position:-50px -143px}"+".survey-tip.success {background-color:#d8f1ff; background-position:-75px -106px; border-color:#6abeea}"+"#pubFeedBack {position:fixed; _position:absolute; left:50%; margin-left: 505px; bottom:60px; width:60px; font-size:12px;}"+"#backTop,#callSurvey {display:block; width:60px; padding:1px; height:60px; background-color: #5E9FE1; line-height:22px; text-align:center; color:#fff; text-decoration:none}"+"#backTop {position: relative; display: none; overflow: hidden; background:#5E9FE1; text-indent: -999em;}"+"#backTop:hover {background:#3687D9; zoom:1; text-decoration:none; color:#fff}"+"#backTop i {display:block; position: absolute; top: 50%; left: 50%; width:25px; height:13px; margin: -6px 0 0 -12px; background-position:0 0}"+"#callSurvey {margin-top:1px; background:#5E9FE1;}"+"#callSurvey:hover {background:#3687D9; zoom:1;text-decoration:none; color:#fff}"+"#callSurvey i {display:none; width:26px; height:25px; margin:9px auto 0; background-position:0 0}"+"#callSurvey:hover i {background-position:-30px 0}"+"#backTop .text{display: none;}"+"#callSurvey .text{display: block; width: 40px; margin: 12px auto 0; font: normal 14px/16px 'Microsoft YaHei','\5FAE\8F6F\96C5\9ED1';}</style>";c("head").append(b);c.fn.survey=function(l){var e={content:"\u5c06\u60a8\u7684\u4f7f\u7528\u5efa\u8bae\u6216\u8005\u60f3\u6cd5\u544a\u8bc9\u6211\u4eec\u5427\uff0c\u6211\u4eec\u5c06\u8ba4\u771f\u503e\u542c\u60a8\u7684\u611f\u53d7\uff1a\uff09",width:"298",height:"207",words:500,api:"//sj.zol.com.cn/publish/ajax/survey.php",channel:"<em>\u201c\u5f53\u524d\u9875\u9762\u201d</em>",pageType:"",isTop:1,url:location.hostname+location.pathname};var l=c.extend(e,l);if(c.browser.msie){var g=parseInt(c.browser.version)}var f=function(){var q=c('<div id="pubFeedBack"></div>');q.html('<a href="javascript:;" id="backTop" title="\u8fd4\u56de\u9876\u90e8"><i></i><span class="text">\u8fd4\u56de\u9876\u90e8</span></a><a href="javascript:;" id="callSurvey"  title="\u5efa\u8bae\u53cd\u9988"><i></i><span class="text">\u5efa\u8bae\u53cd\u9988</span></a>');c("body").append(q);p()};var j=function(){var q=c("<div></div>");q.addClass("survey-box");q.attr("id","D_SurveyBox");if(g&&g<10){q.addClass("survey-ie")}q.html('<div class="survey-header"><div class="survey-title">\u60a8\u5bf9'+l.channel+'\u6ee1\u610f\u5417\uff1f</div><a id="D_SurveyClose" class="survey-close" href="#"></a></div><div class="survey-main"><div class="survey-radio survey-radio-good" idx="1"><i></i>\u6ee1\u610f</div><div class="survey-radio survey-radio-bad" idx="2"><i></i>\u4e0d\u6ee1\u610f</div><textarea id="D_SurveyText" class="survey-text default">'+l.content+'</textarea><div class="survey-count">\u8fd8\u53ef\u4ee5\u8f93\u5165<label id="D_SurveyCountCur" class="survey-count-cur">'+l.words+'</label>\u5b57 ctrl+enter\u5feb\u901f\u53cd\u9988</div><button id="D_SurveySubmit" class="survey-submit">\u63d0\u4ea4</button></div><div id="D_SurveyMask" class="survey-mask"></div><div id="D_SurveyTip" class="survey-tip"></div>');c("body").append(q);p()};var i=function(){var q=c("#D_SurveyBox");if(!q){return}if(!g||g>=10){q.removeClass("survey-hide-w3c").addClass("survey-show-w3c")}q.css("visibility","visible")};var o=function(){var q=c("#D_SurveyBox");if(!q){return}d();if(!g||g>=10){q.removeClass("survey-show-w3c").addClass("survey-hide-w3c");return}q.css("visibility","hidden")};var d=function(){c("#D_SurveyText").val(l.content).addClass("default");c(".survey-count-cur").text(l.words);c(".survey-radio").removeClass("survey-radio-good-sel survey-radio-bad-sel")};var h=function(){c(window).resize(function(){var u=c(this).width();if(u<=1124){c("#pubFeedBack").hide()}else{c("#pubFeedBack").show()}});c(window).bind("scroll",function(){if(l.isTop==1){if(c(this).scrollTop()>50){c("#backTop").fadeIn().css({"display":"block"})}else{c("#backTop").fadeOut().css({"display":""})}}});c("#backTop").bind("click",function(u){if(l.isTop==1){u.preventDefault();c("html,body").scrollTop(0)}});c("#callSurvey").bind("click",function(u){u.preventDefault();i()});var t=c("#D_SurveyClose");t.bind("click",function(u){u.preventDefault();o()});var q=c(".survey-radio");if(!q||!q.length){return}q.each(function(){c(this).bind("click",function(){q.removeClass("survey-radio-good-sel survey-radio-bad-sel");if(c(this).attr("idx")==1){c(this).addClass("survey-radio-good-sel")}else{c(this).addClass("survey-radio-bad-sel")}})});var r=c("#D_SurveyText"),s=c("#D_SurveySubmit");r.bind({"focus":function(){if(c(this).val()==l.content){c(this).val("")}c(this).removeClass("default")},"blur":function(){if(c(this).val()==""||c(this).val()==l.content){c(this).val(l.content);c(this).addClass("default")}else{c(this).removeClass("default")}},"keyup":function(w){var u=(l.words-c(this).val().length),v=c("#D_SurveyCountCur");v.html(u);if(u<0){v.addClass("survey-count-over");s.attr("disabled","disabled").addClass("survey-submit-disabled")}else{v.removeClass("survey-count-over");s.removeAttr("disabled").removeClass("survey-submit-disabled")}if(w.ctrlKey&&w.keyCode==13){k.call(s)}}});if(!s.hasClass("survey-submit-disabled")){s.bind("click",function(){k.call(this)})}};var n=function(){var q=c(".survey-radio-good-sel").length>0?c(".survey-radio-good-sel").attr("idx"):""||c(".survey-radio-bad-sel").length>0?c(".survey-radio-bad-sel").attr("idx"):"";var r=c.trim(c("#D_SurveyText").val());if(""==q){m("warning","\u8bf7\u9009\u62e9 '\u6ee1\u610f' \u8fd8\u662f '\u4e0d\u6ee1\u610f'\uff01");return null}if(r.length==0||r==l.content){m("warning","\u8bf7\u8f93\u5165\u60a8\u5bf9"+l.channel+"\u7684\u5efa\u8bae\uff01");return null}return{causes:q,content:r}};var k=function(){if(!(feedContent=n())||!l.pageType){return}var q={type:"GET",url:l.api,data:{pageType:l.pageType,url:l.url,causes:feedContent.causes,content:feedContent.content},dataType:"jsonp",success:function(r){if(r.status==1){m("success","\u63d0\u4ea4\u6210\u529f! \u8c22\u8c22\u60a8\u7684\u53cd\u9988!");setTimeout(function(){o()},1000)}else{if(r.status==0){m("warning","\u63d0\u4ea4\u5931\u8d25! \u8bf7\u7a0d\u540e\u518d\u8bd5!")}else{if(r.status==2){m("success","\u63d0\u4ea4\u6210\u529f! \u8c22\u8c22\u60a8\u7684\u53cd\u9988!");setTimeout(function(){o()},1000)}}}}};c.ajax(q)};var m=function(r,s){var t=c("#D_SurveyTip"),q=c("#D_SurveyMask");if(!t||!q){return}t.removeClass("warning success").addClass(r).html(s);q.css("display","block");t.css("display","block");setTimeout(function(){q.css("display","none");t.css("display","none")},1000)};var p=function(){if(g!==6){return}var r=c("#D_SurveyBox");var q=c("#pubFeedBack");if(!r||!q){return}c(window).bind("scroll",function(){var t=c(window).height(),s=c(window).scrollTop(),v=t+s-l.height;var u=t+s-q.height()-15;r.css("top",v+"px");q.css("top",u+"px")})};if(screen.width>=1280){(function(){f();j();h()})()}}})(jQuery);